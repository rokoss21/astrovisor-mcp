// Patch for adding transits tool to index.ts

// After line 172 (after calculate_solar_arc_directions tool), add:
  },
  {
    name: "calculate_transits",
    description: "Рассчитывает транзиты планет к натальной карте", 
    inputSchema: {
      type: "object",
      properties: {
        name: { type: "string", description: "Имя человека" },
        birth_datetime: { type: "string", description: "Дата и время рождения в формате ISO" },
        birth_latitude: { type: "number", description: "Широта места рождения" },
        birth_longitude: { type: "number", description: "Долгота места рождения" },
        birth_location: { type: "string", description: "Место рождения" },
        birth_timezone: { type: "string", description: "Часовой пояс рождения" },
        target_date: { type: "string", description: "Дата для расчета транзитов" },
        orb_factor: { type: "number", description: "Множитель орбов (по умолчанию 1.0)" },
        min_significance: { type: "number", description: "Минимальная значимость транзитов" }
      },
      required: ["name", "birth_datetime", "birth_latitude", "birth_longitude", "birth_location", "birth_timezone", "target_date"]
    }

// After line ~395 (after solar_arc_directions case), add:

      case "calculate_transits":
        result = await apiClient.post('/api/transits/calculate', {
          name: args.name,
          birth_datetime: args.birth_datetime,
          birth_latitude: args.birth_latitude,
          birth_longitude: args.birth_longitude,
          birth_location: args.birth_location,
          birth_timezone: args.birth_timezone,
          target_date: args.target_date,
          orb_factor: args.orb_factor || 1.0,
          min_significance: args.min_significance || 0.5
        });
        break;
